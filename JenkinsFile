pipeline {
agent any
stages {
    stage('Checkout') {
        steps {
            echo 'Checking out code...'
            // The 'Pipeline script from SCM (source code management)' option performs an implicit checkout
            }
        }
    stage('Build') {
        steps {
            echo 'Building the application...'
            sh './mvn clean install'
            }
        }
    stage('Test') {
        steps {
            echo 'Running unit tests...'
            sh './mvn test'
            }
        }  
    }
    post {
        always{ 
            echo 'Processing results...'
            junit 'target/surefire-reports/**/*.xml'
            archiveArtifacts artifacts: 'target/*.jar', fingerprint: true
        }    
    }
}
